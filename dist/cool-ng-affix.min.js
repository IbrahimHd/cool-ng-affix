"use strict";angular.module("cool.bootstrap.affix",["cool.dimensions"]).directive("coolAffix",["$window","dimensions",function($window,dimensions){var checkPosition=function(a,b,c){var d,e=window.pageYOffset,f=document.body.scrollHeight,g=dimensions.offset.call(b[0]),h=dimensions.height.call(b[0]),i=1*c.offsetTop,j=1*c.offsetBottom,k="affix affix-top affix-bottom";d=null!==a.unpin&&e+a.unpin<=g.top?!1:j&&g.top+h>=f-j?"bottom":i&&i>=e?"top":!1,a.affixed!==d&&(a.affixed=d,a.unpin="bottom"===d?g.top-e:null,b.removeClass(k).addClass("affix"+(d?"-"+d:"")))},checkCallbacks=function(scope,instance,iElement,iAttrs){instance.affixed?iAttrs.onUnaffix&&eval("scope."+iAttrs.onUnaffix):iAttrs.onAffix&&eval("scope."+iAttrs.onAffix)};return{restrict:"EAC",link:function(a,b,c){var d={unpin:null};angular.element($window).bind("scroll",function(){checkPosition(d,b,c),checkCallbacks(a,d,b,c)}),angular.element($window).bind("click",function(){setTimeout(function(){checkPosition(d,b,c),checkCallbacks(a,d,b,c)},1)})}}}]),angular.module("cool.dimensions",[]).provider("dimensions",function(){this.$get=function(){return this},this.offset=function(){if(this){var a=this.getBoundingClientRect(),b=this.ownerDocument.documentElement;return{top:a.top+window.pageYOffset-b.clientTop,left:a.left+window.pageXOffset-b.clientLeft}}},this.height=function(a){var b=window.getComputedStyle(this),c=this.offsetHeight;return a?c+=parseFloat(b.marginTop)+parseFloat(b.marginBottom):c-=parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)+parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth),c},this.width=function(a){var b=window.getComputedStyle(this),c=this.offsetWidth;return a?c+=parseFloat(b.marginLeft)+parseFloat(b.marginRight):c-=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight)+parseFloat(b.borderLeftWidth)+parseFloat(b.borderRightWidth),c}}).constant("debounce",function(a,b){var c,d;return function(){var e=this,f=arguments,g=function(){c=null,d=a.apply(e,f)};return clearTimeout(c),c=setTimeout(g,b),d}}).provider("jQuery",["dimensionsProvider",function(a){var b=this,c=angular.element;this.fn=angular.extend({},a),this.$get=function(){return delete b.fn.$get,function(a){var d=a instanceof HTMLElement?a:document.querySelectorAll(a);return d=c(d),angular.forEach(b.fn,function(a,b){d[b]=a.bind(d[0])}),d}}}]);